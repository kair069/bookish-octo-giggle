{% extends 'mi_app/base.html' %}

{% block content %}
  <h1>Listado de Ventas</h1>
  <a href="{% url 'crear_venta' %}" class="btn btn-primary mb-3">Nueva Venta</a>
  
  <table class="table table-striped mt-3">
    <thead>
      <tr>
        <th>NÂ° Documento</th>
        <th>Cliente</th>
        <th>Fecha</th>
        <th>Total (S/.)</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for venta in ventas %}
        <tr>
          <td>{{ venta.numero_documento }}</td>
          <td>{{ venta.cliente_nombre }}</td>
          <td>{{ venta.fecha_venta|date:"d/m/Y H:i" }}</td>
          <td>{{ venta.total_venta|floatformat:2 }}</td>
          <td>
            <a href="{% url 'editar_venta' venta.id %}" class="btn btn-warning btn-sm">Editar</a>
            <a href="{% url 'eliminar_venta' venta.id %}" class="btn btn-danger btn-sm">Eliminar</a>
            <a href="{% url 'listar_detalles_venta' venta.id %}" class="btn btn-info btn-sm">Ver Detalles</a>
            <a href="{% url 'agregar_detalle_venta' venta.id %}" class="btn btn-success btn-sm">Agregar Detalle</a>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="5" class="text-center">No hay ventas registradas.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}


